!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("scroll-animation-engine",[],e):"object"==typeof exports?exports["scroll-animation-engine"]=e():t["scroll-animation-engine"]=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e){return Math.abs(t-e)<n}},function(t,e,r){"use strict";t.exports="EPSILON"in Number?Number.EPSILON:2.220446049250313e-16},function(t,e,r){"use strict";r.r(e);r(0);var n,o=0,a="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),r=Math.max(0,16.7-(e-o));o=e+r,setTimeout(function(){return t(o)},r)};!function(t){t.Read="read",t.Update="update",t.Render="render",t.PostRender="postRender",t.FixedUpdate="fixedUpdate"}(n||(n={}));var i=1/60*1e3,s=!0,l=!1,c=!1,u={delta:0,timestamp:0},f=[n.Read,n.Update,n.Render,n.PostRender],d=function(t){return l=t},p=f.reduce(function(t,e){var r=function(t){var e=[],r=[],n=0,o=!1,a=0,i=new WeakSet,s=new WeakSet,l={cancel:function(t){var e=r.indexOf(t);i.add(t),-1!==e&&r.splice(e,1)},process:function(c){var u,f;if(o=!0,e=(u=[r,e])[0],(r=u[1]).length=0,n=e.length)for(a=0;a<n;a++)(f=e[a])(c),!0!==s.has(f)||i.has(f)||(l.schedule(f),t(!0));o=!1},schedule:function(t,a,i){var l=i&&o,c=l?e:r;a&&s.add(t),-1===c.indexOf(t)&&(c.push(t),l&&(n=e.length))}};return l}(d);return t.sync[e]=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),l||y(),r.schedule(t,e,n),t},t.cancelSync[e]=function(t){return r.cancel(t)},t.steps[e]=r,t},{steps:{},sync:{},cancelSync:{}}),g=p.steps,m=p.sync,h=(p.cancelSync,function(t){return g[t].process(u)}),v=function t(e){l=!1,u.delta=s?i:Math.max(Math.min(e-u.timestamp,40),1),s||(i=u.delta),u.timestamp=e,c=!0,f.forEach(h),c=!1,l&&(s=!1,a(t))},y=function(){l=!0,s=!0,c||a(v)},S=m,b=function(){return(b=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},w=function(t,e){return function(r){return Math.max(Math.min(r,e),t)}},k=function(t){return function(e){return"string"==typeof e&&0===e.indexOf(t)}},T=function(t){return t%1?Number(t.toFixed(5)):t},O={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},P=b({},O,{transform:w(0,1)}),x=b({},O,{default:1}),R=function(t){return{test:function(e){return"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},A=R("deg"),M=R("%"),D=R("px"),C=(R("vh"),R("vw"),w(0,255)),L=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,Y=function(t){return void 0!==t.red},F=function(t){return void 0!==t.hue},E=function(t){var e=t.length;return function(r){if("string"!=typeof r)return r;for(var n={},o=function(t){return"string"==typeof t?t.split(/,\s*/):[t]}(function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))}(r)),a=0;a<e;a++)n[t[a]]=void 0!==o[a]?parseFloat(o[a]):1;return n}},X=b({},O,{transform:function(t){return Math.round(C(t))}}),j=k("rgb"),I={test:function(t){return"string"==typeof t?j(t):Y(t)},parse:E(["red","green","blue","alpha"]),transform:function(t){var e=t.red,r=t.green,n=t.blue,o=t.alpha;return function(t){var e=t.red,r=t.green,n=t.blue,o=t.alpha;return"rgba("+e+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:X.transform(e),green:X.transform(r),blue:X.transform(n),alpha:T(o)})}},N=k("hsl"),Z={test:function(t){return"string"==typeof t?N(t):F(t)},parse:E(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,r=t.saturation,n=t.lightness,o=t.alpha;return function(t){var e=t.hue,r=t.saturation,n=t.lightness,o=t.alpha;return"hsla("+e+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(e),saturation:M.transform(T(r)),lightness:M.transform(T(n)),alpha:T(o)})}},U=b({},I,{test:k("#"),parse:function(t){var e="",r="",n="";return t.length>4?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),e+=e,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),z={test:function(t){return"string"==typeof t&&L.test(t)||I.test(t)||Z.test(t)||U.test(t)},parse:function(t){return I.test(t)?I.parse(t):Z.test(t)?Z.parse(t):U.test(t)?U.parse(t):t},transform:function(t){return Y(t)?I.transform(t):F(t)?Z.transform(t):t}};var W=function(){return(W=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var H,q=function(t){var e=t.onRead,r=t.onRender,n=t.aliasMap,o=void 0===n?{}:n,a=t.useCache,i=void 0===a||a;return function(t){var n={},a=[],s=!1,l=function(t,e){var r=o[t]||t,i=n[r];n[r]=e,n[r]!==i&&(-1===a.indexOf(r)&&a.push(r),s||(s=!0,S.render(c)))};function c(e){return void 0===e&&(e=!1),(!0===e||s)&&(r(n,t,a),s=!1,a.length=0),this}return{get:function(r){var a=o[r]||r;return a?i&&void 0!==n[a]?n[a]:e(a,t):n},set:function(t,e){if("string"==typeof t){if(void 0===e)return function(e){return l(t,e)};l(t,e)}else for(var r in t)t.hasOwnProperty(r)&&l(r,t[r]);return this},render:c}}},B=/([a-z])([A-Z])/g,V=function(t){return t.replace(B,"$1-$2").toLowerCase()},$=new Map,G=new Map,J=["Webkit","Moz","O","ms",""],K=J.length,Q=function(t,e){void 0===e&&(e=!1);var r=e?G:$;return r.has(t)||function(t){if("undefined"!=typeof document){H=H||document.createElement("div");for(var e=0;e<K;e++){var r=J[e],n=""===r,o=n?t:r+t.charAt(0).toUpperCase()+t.slice(1);o in H.style&&($.set(t,o),G.set(t,(n?"":"-")+V(o)))}}}(t),r.get(t)||t},tt=["","X","Y","Z"],et=["translate","scale","rotate","skew","transformPerspective"].reduce(function(t,e){return tt.reduce(function(t,r){return t.push(e+r),t},t)},["x","y","z"]),rt=et.reduce(function(t,e){return t[e]=!0,t},{}),nt=function(t){return!0===rt[t]},ot=function(t,e){return et.indexOf(t)-et.indexOf(e)},at=function(t){return"transformOriginX"===t||"transformOriginY"===t},it={color:z,backgroundColor:z,outlineColor:z,fill:z,stroke:z,borderColor:z,borderTopColor:z,borderRightColor:z,borderBottomColor:z,borderLeftColor:z,borderRadius:D,width:D,maxWidth:D,height:D,maxHeight:D,top:D,left:D,bottom:D,right:D,rotate:A,rotateX:A,rotateY:A,rotateZ:A,scale:x,scaleX:x,scaleY:x,scaleZ:x,skew:A,skewX:A,skewY:A,distance:D,translateX:D,translateY:D,translateZ:D,perspective:D,opacity:P,transformOriginX:M,transformOriginY:M,transformOriginZ:D},st=function(t){return it[t]},lt="number",ct="object",ut="transform-origin",ft="transform",dt="translateZ",pt=";transform: none",gt=function(t,e){return";"+t+":"+e};var mt=new Set(["scrollLeft","scrollTop"]),ht=q({onRead:function(t,e){var r=e.element,n=e.preparseOutput,o=st(t);if(nt(t))return o&&o.default||0;if(mt.has(t))return r[t];var a=window.getComputedStyle(r,null).getPropertyValue(Q(t,!0))||0;return n&&o&&o.parse?o.parse(a):a},onRender:function(t,e,r){var n=e.element,o=e.enableHardwareAcceleration;n.style.cssText+=function(t,e,r,n){void 0===e&&(e=!0),void 0===r&&(r=!0);for(var o=!0===e?Object.keys(t):e,a="",i="",s=!1,l=!0,c=!1,u=!1,f=o.length,d=0;d<f;d++){var p=o[d];if(nt(p)){for(var g in c=!0,t)nt(g)&&-1===o.indexOf(g)&&o.push(g);break}}o.sort(ot);var m=o.length;for(d=0;d<m;d++)if(p=o[d],!n.has(p)){var h=nt(p),v=t[p],y=st(p);h&&(y.default&&v!==y.default||!y.default&&0!==v)&&(l=!1),y&&(_(v)===lt||_(v)===ct)&&y.transform&&(v=y.transform(v)),h?(i+=p+"("+v+") ",u=p===dt||u):at(p)?(t[p]=v,s=!0):a+=gt(Q(p,!0),v)}return s&&(a+=gt(Q(ut,!0),(t.transformOriginX||0)+" "+(t.transformOriginY||0)+" "+(t.transformOriginZ||0))),c&&(!u&&r&&(i+=dt+"(0)"),a+=l?pt:gt(Q(ft,!0),i)),a}(t,r,o,mt),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=t.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=t.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:mt}),vt=function(t,e){return t/100*e+"px"},yt={fill:z,stroke:z,scale:x,scaleX:x,scaleY:x,opacity:P,fillOpacity:P,strokeOpacity:P},St=q({onRead:function(t,e){var r=e.element;if(nt(t)){var n=function(t){return yt[t]}(t);return n?n.default:0}return r.getAttribute(t)},onRender:function(t,e,r){var n=e.dimensions;!function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setAttribute(r,e[r])}(e.element,function(t,e,r,n){var o=!1,a=!1,i={},s=r?{pathLength:"0",pathSpacing:""+n}:void 0,l=void 0!==t.scale?t.scale||1e-7:t.scaleX||1,c=void 0!==t.scaleY?t.scaleY||1e-7:l||1,u=e.width*((t.originX||50)/100)+e.x,f=e.height*((t.originY||50)/100)+e.y,d=1*l*-u,p=1*c*-f,g=u/l,m=f/c,h={translate:"translate("+t.translateX+", "+t.translateY+") ",scale:"translate("+d+", "+p+") scale("+l+", "+c+") translate("+g+", "+m+") ",rotate:"rotate("+t.rotate+", "+u+", "+f+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var v in t)if(t.hasOwnProperty(v)){var y=t[v];nt(v)?o=!0:!r||"pathLength"!==v&&"pathSpacing"!==v||"number"!=typeof y?r&&"pathOffset"===v?i["stroke-dashoffset"]=vt(-y,n):i[V(v)]=y:(a=!0,s[v]=vt(y,n))}if(a&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),o)for(var v in i.transform="",h)if(h.hasOwnProperty(v)){var S="scale"===v?"1":"0";i.transform+=h[v].replace(/undefined/g,S)}return i}(t,n,e.isPath,e.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),bt=q({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,r=void 0===e?0:e,n=t.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,r)}}),wt=new WeakMap,kt=function(t,e){var r;return t instanceof HTMLElement?r=function(t,e){return ht(W({element:t,enableHardwareAcceleration:!0,preparseOutput:!0},e))}(t,e):t instanceof SVGElement?r=function(t){var e=t.getBBox(),r={element:t,dimensions:{x:e.x,y:e.y,width:e.width,height:e.height},isPath:!1};return"path"===t.tagName&&(r.isPath=!0,r.pathLength=t.getTotalLength()),St(r)}(t):t===window&&(r=bt(t)),wt.set(t,r),r},Tt=function(t,e){return wt.has(t)?wt.get(t):kt(t,e)};var Ot=function(t,e){var r="string"==typeof t?document.querySelector(t):t;return Tt(r,e)};function Pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function At(t,e,r){return Math.min(Math.max(t,e),r)}var Mt=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rt(this,"animating",!1),Rt(this,"scrolling",!1),Rt(this,"onScrollStartCallbacks",[]),Rt(this,"onScrollStopCallbacks",[]),Rt(this,"lastTrackedScrollPosition",window.pageYOffset),Rt(this,"lastTrackedScrollTimestamp",null),Rt(this,"scrollTimeout",null),Rt(this,"animations",new Map),Rt(this,"animationRenderLoop",function(t){var r=t.timestamp,n=e.lastTrackedScrollPosition,o=window.pageYOffset,a=o-n,i=Math.sign(a),s=r;0===i?s-e.lastTrackedScrollTimestamp>=250&&e.setScrollingState(!1):(e.setScrollingState(!0),e.lastTrackedScrollPosition=o,e.lastTrackedScrollTimestamp=s);var l=1===i?n:o,c=1===i?o:n,u=!0,f=!1,d=void 0;try{for(var p,g=e.animations[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var m=Pt(p.value,2),h=(m[0],m[1]),v=e.computeDragDistanceFromScrollForAnimation(l,c,i,h),y=h.distanceToProgress(v),b=h.progress;e.processAnimation(h,y),h.progress!==b&&(h.render(h.progress,h.domElements),e.callProgressCallbacksIfNeeded(h,o))}}catch(t){f=!0,d=t}finally{try{u||null==g.return||g.return()}finally{if(f)throw d}}e.haveAllAnimationsStopped()?e.stopAnimationLoop(s):S.update(e.animationRenderLoop)}),Rt(this,"onScroll",function(){if(!e.animating){var t=window.pageYOffset,r=t-e.lastTrackedScrollPosition,n=Math.sign(r);if(0!==n){e.setScrollingState(!0);var o=1===n?e.lastTrackedScrollPosition:t,a=1===n?t:e.lastTrackedScrollPosition;if(e.isScrollToReact(o,a,n))return e.lastTrackedScrollTimestamp=Date.now(),void e.startAnimationLoop();e.lastTrackedScrollPosition=t,e.scrollTimeout&&clearTimeout(e.scrollTimeout),e.scrollTimeout=setTimeout(e.setScrollingState,250,!1)}}}),Rt(this,"setScrollingState",function(t){e.scrolling!==t&&(e.scrolling=t,e.scrolling?e.onScrollStart():e.onScrollStop())})}return function(t,e,r){e&&xt(t.prototype,e),r&&xt(t,r)}(t,[{key:"init",value:function(){this.lastTrackedScrollPosition=window.pageYOffset}},{key:"callProgressCallbacksIfNeeded",value:function(t,e){t.animationStartReached&&0===t.progress&&t.animationStartReached(e,t.domElements),t.animationEndReached&&1===t.progress&&t.animationEndReached(e,t.domElements)}},{key:"processAnimation",value:function(t,e){var r=At(t.targetProgress+e,0,1);this.setTargetProgress(t,r),t.progress=function(t,e,r){return(1-r)*t+r*e}(t.progress,t.targetProgress,t.lerpFactor),Math.abs(t.progress-t.targetProgress)<.001?(t.progress=t.targetProgress,t.animating=!1):t.animating=!0}},{key:"setTargetProgress",value:function(t,e){if(t.targetProgress!==e){var r=t.targetProgress;t.targetProgress=e,t.targetProgress!==r&&this.callTargetProgressCallbacksIfNeeded(t)}}},{key:"callTargetProgressCallbacksIfNeeded",value:function(t){t.animationTargetStartReached&&0===t.targetProgress&&t.animationTargetStartReached(this.lastTrackedScrollPosition,t),t.animationTargetEndReached&&1===t.targetProgress&&t.animationTargetEndReached(this.lastTrackedScrollPosition,t)}},{key:"haveAllAnimationsStopped",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.animations[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=Pt(n.value,2);a[0];if(a[1].animating)return!1}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}return!0}},{key:"startAnimationLoop",value:function(){console.info("starting animation loop"),this.scrollTimeout&&clearTimeout(this.scrollTimeout),S.update(this.animationRenderLoop),this.animating=!0}},{key:"stopAnimationLoop",value:function(t){if(console.info("stopping animation loop"),this.scrolling){var e=250-(t-this.lastTrackedScrollTimestamp);this.scrollTimeout=setTimeout(this.setScrollingState,e,!1)}this.animating=!1}},{key:"computeDragDistanceFromScrollForAreas",value:function(t,e,r,n){var o=!0,a=!1,i=void 0;try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,u=c.start,f=c.end,d=c.forceDistance,p=c.dragFactor,g=null===u?t:Math.max(t,u),m=null===f?e:Math.min(e,f),h=Math.max(m-g,0);if(0!==h)return d?d*r:h*r*(p||1)}}catch(t){a=!0,i=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw i}}return 0}},{key:"computeDragDistanceFromScrollForAnimation",value:function(t,e,r,n){if(0===r)return 0;if(1===r&&1===n.progress)return 0;if(-1===r&&0===n.progress)return 0;var o=1===r?n.scrollDownDragAreas():n.scrollUpDragAreas();return this.computeDragDistanceFromScrollForAreas(t,e,r,o)}},{key:"isScrollToReact",value:function(t,e,r){var n=!0,o=!1,a=void 0;try{for(var i,s=this.animations[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=Pt(i.value,2),c=(l[0],l[1]);if(0!==this.computeDragDistanceFromScrollForAnimation(t,e,r,c))return!0}}catch(t){o=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return!1}},{key:"onScrollStart",value:function(){console.info("onScrollStart");var t=!0,e=!1,r=void 0;try{for(var n,o=this.onScrollStartCallbacks[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){(0,n.value)()}}catch(t){e=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw r}}}},{key:"onScrollStop",value:function(){console.info("onScrollStop");var t=!1,e=window.pageYOffset,r=!0,n=!1,o=void 0;try{for(var a,i=this.animations[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=Pt(a.value,2),l=(s[0],s[1]);if(l.snapOnStop){if(0===l.targetProgress||1===l.targetProgress)continue;var c=this.computeDragDistanceFromScrollForAnimation(0,e,-1,l),u=l.distanceToProgress(c),f=l.progress+u>0;l.progress<.5||f?(console.info("snapping to 0%"),this.setTargetProgress(l,0)):(console.info("snapping to 100%"),this.setTargetProgress(l,1)),t=!0}}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}t&&!this.animating&&this.startAnimationLoop();var d=!0,p=!1,g=void 0;try{for(var m,h=this.onScrollStopCallbacks[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){(0,m.value)()}}catch(t){p=!0,g=t}finally{try{d||null==h.return||h.return()}finally{if(p)throw g}}}},{key:"runAfterDomContentLoaded",value:function(t){"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)}},{key:"registerAnimation",value:function(t){var e=t.identifier,r=t.lerpFactor,n=t.getDomElements,o=t.doInitialDomSetup,a=t.snapOnStop,i=t.distanceToProgress,s=t.scrollDownDragAreas,l=t.scrollUpDragAreas,c=t.render,u=t.animationTargetStartReached,f=t.animationTargetEndReached,d=t.animationEndReached,p=t.animationStartReached;console.info("registering animation '".concat(e,"'")),0===this.animations.size&&(console.info("registering scroll handler"),window.addEventListener("scroll",this.onScroll)),console.info("getting dom references and initializing stylers for '".concat(e,"'"));for(var g={},m=n(),h=Object.keys(m),v=0;v<h.length;v++){var y=h[v],S=m[y];g[y]={element:S,styler:Ot(S)}}o&&o(g),this.animations.set(e,{progress:0,targetProgress:0,animating:!1,lerpFactor:r||.3,snapOnStop:a,distanceToProgress:i,scrollDownDragAreas:s,scrollUpDragAreas:l,domElements:g,animationTargetStartReached:u,animationTargetEndReached:f,animationStartReached:p,animationEndReached:d,render:c}),this.handleInitialScrollPosition(this.animations.get(e))}},{key:"registerOnScrollStartCallback",value:function(t){this.onScrollStartCallbacks.push(t)}},{key:"registerOnScrollStopCallback",value:function(t){this.onScrollStopCallbacks.push(t)}},{key:"handleInitialScrollPosition",value:function(t){var e=window.pageYOffset;if(0!==e){var r=this.computeDragDistanceFromScrollForAnimation(0,e,1,t),n=At(t.distanceToProgress(r),0,1),o=t.snapOnStop?Math.round(n):n;0!==o&&(console.info("handling intitial scroll position of ".concat(e)),t.progress=t.targetProgress=o,this.callTargetProgressCallbacksIfNeeded(t),this.callProgressCallbacksIfNeeded(t,e),t.render(t.progress,t.domElements))}}}]),t}();e.default=Mt}])});